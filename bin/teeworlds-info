#!/usr/bin/env node
'use strict';

var teeworldsInfo = require('../lib/teeworlds-info');

var server = process.env.TW_SERVER;
var port = process.env.TW_PORT ? parseInt(process.env.TW_PORT) : 0;

if (!server || !port) {
  process.stderr.write('"TW_SERVER" and "TW_PORT" enviroment variables required\n');
  return process.exit(1);
}

teeworldsInfo.getInfo(server, port).then(function(info) {
  process.stdout.write(JSON.stringify(info) + '\n');
}, function(err) {
  process.stderr.write(err.message + '\n');
});
